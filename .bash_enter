#!/usr/bin/env bash

if [[ $(basename "$BASH_SOURCE") = .bash_enter ]]; then
  DOCKER_DEVBOX_DIR=$(dirname "$BASH_SOURCE")
else
  DOCKER_DEVBOX_DIR=$PWD
fi
export DOCKER_DEVBOX_DIR=$DOCKER_DEVBOX_DIR

if [ -d ~/.docker-devbox/.bash_enter.d ]; then
  for enter_script in ~/.docker-devbox/.bash_enter.d/*; do
    ln -rfs $enter_script "$DOCKER_DEVBOX_DIR"/.bash_enter.d/$(basename "$enter_script")
  done
fi

if [ -d ~/.docker-devbox/.bash_leave.d ]; then
  for leave_script in ~/.docker-devbox/.bash_leave.d/*; do
    ln -rfs $leave_script "$DOCKER_DEVBOX_DIR"/.bash_leave.d/$(basename "$leave_script")
  done
fi

if [ -d "$DOCKER_DEVBOX_DIR"/.bash_enter.d ]; then
  for enter_script in "$DOCKER_DEVBOX_DIR"/.bash_enter.d/*; do
    . $enter_script
  done
fi
